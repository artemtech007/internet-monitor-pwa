# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ Internet Monitor

## –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ –Ω–æ–≤–æ–º VPS

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 20
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
sudo npm install -g pm2

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx –∏ SSL
sudo apt install -y nginx certbot python3-certbot-nginx
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
mkdir -p ~/internet-monitor
cd ~/internet-monitor

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Å–ø–æ—Å–æ–±)
# –ù–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ git clone –∏–ª–∏ scp

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ yourdomain.com)
sudo systemctl stop nginx
sudo certbot certonly --standalone -d yourdomain.com --email your@email.com --agree-tos
sudo systemctl start nginx
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/nginx/sites-available/internet-monitor`:

```nginx
server {
    listen 443 ssl http2;
    server_name yourdomain.com;

    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;

    # WebSocket –ø—Ä–æ–∫—Å–∏
    location /ws {
        proxy_pass http://localhost:8081;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 86400;
        proxy_buffering off;
    }

    # API –ø—Ä–æ–∫—Å–∏
    location /api {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ PWA
    location / {
        return 302 https://username.github.io/internet-monitor-pwa/;
    }
}

server {
    listen 80;
    server_name yourdomain.com;
    return 301 https://$server_name$request_uri;
}
```

–í–∫–ª—é—á–µ–Ω–∏–µ —Å–∞–π—Ç–∞:
```bash
sudo ln -s /etc/nginx/sites-available/internet-monitor /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

### 5. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ PM2
cd ~/internet-monitor
pm2 start server.js --name "internet-monitor-ws"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
pm2 save
pm2 startup

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
pm2 list
pm2 logs internet-monitor-ws
```

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PWA

–í —Ñ–∞–π–ª–µ `pwa/app.js` –æ–±–Ω–æ–≤–∏—Ç–µ URL —Å–µ—Ä–≤–µ—Ä–∞:
```javascript
serverUrl: 'wss://yourdomain.com/ws'
```

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ GitHub Pages.

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç WebSocket
```bash
node -e "
const WebSocket = require('ws');
const ws = new WebSocket('wss://yourdomain.com/ws');
ws.on('open', () => console.log('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ'));
ws.on('error', (e) => console.log('‚ùå –û—à–∏–±–∫–∞:', e.message));
"
```

### –¢–µ—Å—Ç API
```bash
curl https://yourdomain.com/api/devices
```

## üõ†Ô∏è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã
netstat -tlnp | grep -E ":(8080|8081)"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs internet-monitor-ws

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Node.js
node --version
npm --version
```

### WebSocket –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Nginx
sudo systemctl status nginx
sudo nginx -t

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Nginx
sudo tail -f /var/log/nginx/error.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSL
openssl s_client -connect yourdomain.com:443 -servername yourdomain.com
```

### PWA –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL –≤ app.js
grep "serverUrl" internet-monitor/pwa/app.js

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å GitHub Pages
curl https://username.github.io/internet-monitor-pwa/app.js
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
```bash
curl https://yourdomain.com/api/devices
```

### –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
```bash
pm2 logs internet-monitor-ws
tail -f /var/log/nginx/access.log
```

### –†–µ—Å—É—Ä—Å—ã —Å–∏—Å—Ç–µ–º—ã
```bash
htop
df -h
free -h
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
pm2 stop internet-monitor-ws

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
git pull

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart internet-monitor-ws
```

## üö® –ê–≤–∞—Ä–∏–π–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏

### –°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl restart nginx
pm2 restart all

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
df -h
```

### –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã
pm2 monit

# –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã
pm2 scale internet-monitor-ws 1
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs internet-monitor-ws`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `pm2 list`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å: `curl -I https://yourdomain.com/api/devices`
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å –ª–æ–≥–∞–º–∏
